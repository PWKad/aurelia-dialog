{"version":3,"sources":["components/smooth-scroll.js"],"names":[],"mappings":";;;mDAKa,YAAY;;;;;;;;;;mCALjB,QAAQ;iCAAC,MAAM;0CAAC,eAAe;;;;;AAK1B,kBAAY;;;AAQZ,iBARA,YAAY,CAQX,OAAO,EAAE;;;;;;;eAHrB,IAAI,GAAG,EAAE;;AAIP,cAAI,CAAC,OAAO,GAAG,OAAO,CAAC;SACxB;;4BAVU,YAAY;;;;uBAEtB,QAAQ;;mBAAY,GAAG;;;;;uBACvB,QAAQ;;mBAAU,SAAS;;;;;iBASpB,oBAAE;AACR,gBAAI,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAClC,gBAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;AACjB,gBAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,OAAO,EAAC,GAAG,CAAC,CAAC;WAC5C;;;iBAEO,oBAAE;AACR,gBAAG,IAAI,CAAC,IAAI;;;;;;AAAE,qCAAe,IAAI,CAAC,IAAI;sBAAhB,GAAG;AAAe,qBAAG,EAAE,CAAC;iBAAA;;;;;;;;;;;;;;;aAAA;WAC/C;;;iBAEM,iBAAC,KAAK,EAAC;AACZ,iBAAK,CAAC,cAAc,EAAE,CAAC;AACvB,wBAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC;AACzD,mBAAO,KAAK,CAAC;WACd;;;iBAnBe,CAAC,OAAO,CAAC;;;;iBAqBT,qBAAE;AAChB,mBAAO,CAAE,EAAE,GAAG,QAAQ,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC,SAAS,CAAC;WAC9D;;;iBAEc,kBAAC,aAAa,EAAY;;;gBAAX,OAAO,gCAAC,EAAE;;AAEtC,gBAAI,MAAM,GAAG,aAAa,CAAC;;AAE3B,gBAAG,OAAO,aAAa,KAAK,QAAQ,EAAC;AACnC,kBAAI,IAAI,GAAG,aAAa,CAAC;AACzB,kBAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAG,CAAC,EAAE,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,EAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAC3D,oBAAM,GAAG,QAAQ,CAAC,aAAa,WAAS,IAAI,OAAI,CAAC;AACjD,kBAAG,CAAC,MAAM,EAAE,QAAQ,CAAC,aAAa,aAAW,IAAI,OAAI,CAAC;aACvD;;AAGD,gBAAI,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC;AAChC,kBAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,IAAI,CAAC;AAC5B,oBAAQ,CAAC,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;;AAE5B,mBAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAK;AAC9B,sBAAQ,CAAC,MAAM,EAAC,QAAQ,EAAE,MAAM,CAAC,MAAM,CAAC,EAAE,QAAQ,EAAE,MAAK,QAAQ,EAAE,MAAM,EAAC,YAAY,CAAC,SAAS,EAAE,EAAC,MAAM,EAAC,MAAK,MAAM,EAAE,QAAQ,EAAC,OAAO,EAAC,EAAC,OAAO,CAAC,CAAC,CAAC;aACpJ,CAAC,CAAC;WAEJ;;;AApDU,oBAAY,GADxB,MAAM,CACM,YAAY,KAAZ,YAAY;AAAZ,oBAAY,GAFxB,eAAe,CAAC,eAAe,CAAC,CAEpB,YAAY,KAAZ,YAAY;eAAZ,YAAY;;;8BAAZ,YAAY","file":"components/smooth-scroll.js","sourceRoot":"/source/","sourcesContent":["import {bindable,noView,customAttribute} from 'aurelia-framework';\nimport Velocity from 'velocity';\n\n@customAttribute(\"smooth-scroll\")\n@noView\nexport class SmoothScroll{\n\n  @bindable duration = 400;\n  @bindable easing = \"ease-in\";\n\n  subs = [];\n\n  static inject = [Element];\n  constructor(element) {\n    this.element = element;\n  }\n\n  attached(){\n    var sub = this.onClick.bind(this);\n    this.subs.push();\n    this.element.addEventListener(\"click\",sub);\n  }\n\n  detached(){\n    if(this.subs) for(let sub of this.subs) sub();\n  }\n\n  onClick(event){\n    event.preventDefault();\n    SmoothScroll.scrollTo(this.element.getAttribute(\"href\"));\n    return false;\n  }\n\n  static getOffset(){\n    return - 20 - document.querySelector(\".page-host\").offsetTop;\n  }\n\n  static scrollTo(elementOrHash,options={}){\n\n    var target = elementOrHash;\n    //find target by id or name\n    if(typeof elementOrHash === \"string\"){\n      var hash = elementOrHash;\n      if(hash.indexOf(\"#\")===0) hash = hash.slice(1,hash.length);\n      target = document.querySelector(`[id=\"${hash}\"`);\n      if(!target) document.querySelector(`[name=\"${hash}\"`);\n    }\n\n    // manually specify the height of the navbar\n    var t = document.body.scrollTop;\n    window.location.hash = hash;\n    document.body.scrollTop = t;\n\n    return new Promise((resolve) => {\n      Velocity(target,\"scroll\", Object.assign({ duration: this.duration, offset:SmoothScroll.getOffset(),easing:this.easing, complete:resolve},options));\n    });\n\n  }\n\n}\n\n"]}